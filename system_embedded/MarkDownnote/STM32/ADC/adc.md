---
export_on_save:
  html: true
html:
  embed_local_images: false
  embed_svg: true
  offline: false
  toc: true

print_background: false
---


ADC：将  连续的模拟电压  变成   离散的数字信号

若ADC寄存器存放12位数据，则	电压值V=(ADC转换后的数字值z/4096)*3.3V

ADC的转换精度：
例：12位精度，2^12=4096   
0-3.3V的实际电压  对应4096个值  假设某个电压x的对应值z  （假设2.2V对应3000这个值)
所求电压=(z/4096 ) * 3.3V


---------------------------------------------------ADC模式-------------------------------------------
转换模式:
单次  模式：ADC只执行一次转换
连续  模式：一直转换

单次--扫描  模式：所有通道(规则/注入)  按RANK排列依次转换一次
连续--扫描  模式：重复   单次--扫描  转换

间断  模式：由触发信号启动新一轮转换---对扫描模式的补充，用于切换不同分组的ADC通道 组
（通道A转换时，触发间断，按RANK进入下个转换通道B）
（也可以将A、B分成一组，C、D、E分成一组。AB转换时触发间断，进入C、D、E分组）

ADC单通道：只有 单次/连续 模式
ADC多通道：在 单次/连续 模式的基础上必须使能 扫描模式 。可额外使能中断模式

ADC电压采样输入范围：VREF- ≤ VIN ≤ VREF+
ADC供电要求2.4V-3.6V
VSSA （模拟电源地) VREF-(模拟参考负极)   均接地
VDDA  (模拟电源)    VREF+(模拟参考正极)  均接3.3V

规则通道按顺序运行，注入规则通道后，先按规则通道顺序运行，再转回规则通道
（相当于NVIC中断）

ADC时钟最好不超过14M   STM32 ADC 最大的转换速率为1Mhz  即1us
T=采样时间(1.5T)+12.5个周期
当ADCCLK=14Mhz时，采样周期T/ADCCLK=14/14Mhz=1us

ADC触发：
软件
外部事件（定时器捕捉，EXTI）
内部定时器
外部IO

中断触发：
规则通道转换结束进入中断，注入通道转换结束进入中断，AWD看门狗控制进入中断(电压超过或低于量程时)
